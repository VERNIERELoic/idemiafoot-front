<div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24, lg: 32 }">
    <div nz-col class="gutter-row" [nzSpan]="6">
        <div class="inner-box">
        </div>
    </div>
    <div nz-col class="gutter-row" [nzSpan]="24">
        <div class="inner-box">
            <h1>Messaging ðŸ’¬</h1>
            <!-- <div class="call">
                <button nz-button nzType="primary" nzSearch nzShape="round"><span nz-icon nzType="video-camera"
                        nzTheme="outline"></span></button>
                <button nz-button nzType="primary" nzSearch nzShape="round"><span nz-icon nzType="phone"
                        nzTheme="outline"></span></button>
            </div> -->
            <div #scrollMe class="chat">
                <nz-list nzItemLayout="horizontal">
                    <nz-list-item *ngFor="let item of messages">
                        <nz-list-item-meta
                            [ngClass]="{'right-align-content': currentUser.username === item.user.username, 'left-align-content': currentUser.username !== item.user.username}"
                            nzDescription="{{ currentUser.username === item.user.username ? ('me at ' + (item.createdAt | date: 'shortTime')) : (item.user.username + ' at ' + (item.createdAt | date: 'shortTime')) }}">
                            <nz-list-item-meta-title>
                                <div *ngIf="item.user.username != currentUser.username">
                                    <nz-avatar *ngIf="item.user.avatar; else textAvatar" [nzSrc]="item.user.avatar"
                                        nzSize="small" style="vertical-align: middle;"></nz-avatar>
                                    <ng-template #textAvatar>
                                        <nz-avatar [ngStyle]="{ 'background-color': color }"
                                            [nzText]="item.user.username" nzSize="small"
                                            style="vertical-align: middle;"></nz-avatar>
                                    </ng-template>
                                    <a> {{ item.text }}</a>
                                </div>
                                <div *ngIf="item.user.username == currentUser.username">
                                    <a>{{ item.text }} </a>

                                    <nz-avatar *ngIf="currentUser.avatar; else textAvatar" [nzSrc]="currentUser.avatar"
                                        nzSize="small" style="vertical-align: middle;"></nz-avatar>
                                    <ng-template #textAvatar>
                                        <nz-avatar [nzText]="item.user.username" nzSize="small"
                                            style="background-color:#3464cc;"></nz-avatar>
                                    </ng-template>
                                </div>
                            </nz-list-item-meta-title>
                        </nz-list-item-meta>
                    </nz-list-item>
                    <nz-list-empty *ngIf="messages.length === 0"></nz-list-empty>
                </nz-list>
            </div>
            <input type="text" nz-input placeholder="Write here" [(ngModel)]="message"
                (keydown.enter)="sendMsg(message);" class="custom-input" />
            <button nz-button nzType="primary" nzSearch nzShape="round"><span nz-icon nzType="send" nzTheme="outline"></span></button>
            <!-- <div class="lottie-animation mt-10">
                <ng-lottie [options]="options" (animationCreated)="onAnimate($event)"></ng-lottie>
            </div> -->
        </div>
    </div>
    <div nz-col class="gutter-row" [nzSpan]="6">
        <div class="inner-box"></div>
    </div>
</div>